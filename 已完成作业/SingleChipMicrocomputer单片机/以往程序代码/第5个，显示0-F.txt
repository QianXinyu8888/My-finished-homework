#include <reg52.h>
#define uchar unsigned char
#define uint unsigned int

sbit dula = P2^6; 
sbit wela = P2^7; 
sbit led1 = P1^0; 
 
uchar code table[] = {0x3f,0x06,0x5b,0x4f,
	                    0x66,0x6d,0x7d,0x07,
                      0x7f,0x6f,0x77,0x7c,
                      0x39,0x5e,0x79,0x71}; 

uchar num = 0;
void delayms(uint xms);
void main() {
    int i;
    EA = 1;      
    EX0 = 1; 
		for(i=0;i<17;i++)
	 {
		 led1=1;
		 if(i>=16)
			 i=0;
		 wela=1;
		 P0=0xfe;
		 wela=0;
		 delayms(500);
		 dula=1;
		 P0=table[i];
		 dula=0;
		 delayms(500);
		 WR=0;
		 if(INT0==0)
		 {
			 while(INT0==0)
				 IT0=0;
		 }
	 }
	 
}
void external0_isr() interrupt 0 {
    
    led1 = 0;
}
void delayms(uint xms) {
    uint i, j;
    for (i = xms; i > 0; i--)
        for (j = 110; j > 0; j--);
}